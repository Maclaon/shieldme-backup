---
title: 分布式理论（七）
date: 2015-03-22 10:00:00
tags: 分布式理论，两阶段提交协议
author: maclaon
comments: false
---
# 两阶段提交协议
两阶段交协议是一种典型的“中心化副本控制”协议。在该协议中，参与的节点分为两类: 一个中心化协调者节点(coordinator)和N个参与者节点(participant)。每个参与者节点可以是管理数据库副本的节点。两阶段交的思路比较简单，在第一阶段协调者询问所有的参与者是否可以交事务(请参与者投票)，所有参与者向协调者投票。在第二阶段，协调者根据所有参与者的投票结果做出是否事务可以全局交的决定，并通知所有的参与者执行该决定。在一个两阶段交流程中，参与者不能改变自己的投票结果。两阶段交协议的可以全局提交的前提是所有的参与者都同意提交事务，只要有一个参与者投票选择放弃(abort)事务，则事务必须被放弃。

## 流程

![](http://oh8mi0yav.bkt.clouddn.com/two-phase-commit-process-in-distribute-system.png)




