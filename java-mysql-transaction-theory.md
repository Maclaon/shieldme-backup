---
title: Java事务理论
date: 2015-03-29 11:40:23
tags: 事务,分布式基础
comments: false
---
# 事务
通常的观念认为，事务仅与数据库相关。数据库的事物必须符合ACID，对于ACID的解释如下：
> + 原子性(Atomicity): 事物执行过程中的任何失败都将导致事物所做的任何修改失效。
> + 一致性(Consistency): 当事物执行失败时，**所有被该事物影响的数据都应该恢复到事物执行前的状态**。
> + 隔离性(Isolation): 事物执行过程中对数据的修改，在事务提交之前对其他事务不可见。
> + 持久性(Durability): 已提交的事物执行失败时，数据的状态都应该正确。

通俗的理解，事务是一组原子操作单元，从数据库角度说，就是一组SQL指令，要么全部执行成功，若因为某个原因其中一条指令执行有错误，则撤销先前执行过的所有指令。更简答的说就是：要么全部执行成功，要么撤销不执行。

## 为什么需要事务
事务是为解决数据安全操作提出的，事务控制实际上就是**控制数据的安全访问**。具一个简单例子：比如银行转帐业务，账户A要将自己账户上的1000元转到B账户下面，A账户余额首先要减去1000元，然后B账户要增加1000元。假如在中间网络出现了问题，A账户减去1000元已经结束，B因为网络中断而操作失败，那么整个业务失败，必须做出控制，要求A账户转帐业务撤销。这才能保证业务的正确性，完成这个操走就需要事务，将A账户资金减少和B账户资金增加方到一个事务里面，要么全部执行成功，要么操作全部撤销，这样就保持了数据的安全性。
<!--more-->